@model FitnessCenterProject.Models.Trainer

@{
    ViewData["Title"] = "Eğitmen Düzenle";
    // Checkbox listesi için dersleri alıyoruz. Boş gelirse hata vermesin diye kontrol ediyoruz.
    var tumDersler = ViewBag.Services as List<FitnessCenterProject.Models.Service> ?? new List<FitnessCenterProject.Models.Service>();
}

<div class="container mt-4">
    <h2>Eğitmen Düzenle</h2>
    <hr />
    <form asp-action="Edit" enctype="multipart/form-data">
        <input type="hidden" asp-for="Id" />

        <div class="mb-3">
            <label class="form-label">Mevcut Resim:</label>
            <div>
                @if (!string.IsNullOrEmpty(Model.ImageUrl))
                {
                    <img src="/images/trainers/@Model.ImageUrl" width="100" class="img-thumbnail" />
                }
                else
                {
                    <span>Yok</span>
                }
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="FullName" class="form-label">Ad Soyad</label>
            <input asp-for="FullName" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Specialization" class="form-label">Uzmanlık</label>
            <input asp-for="Specialization" class="form-control" />
        </div>

        <div class="mb-3">
            <label class="form-label">Fotoğrafı Değiştir</label>
            <input type="file" name="file" class="form-control" />
        </div>

        <div class="mb-3">
            <label class="form-label"><strong>Verdiği Dersler:</strong></label>
            <div class="border p-3">
                @if (tumDersler.Count == 0)
                {
                    <span>Sistemde hiç ders yok. Önce Hizmet ekleyin.</span>
                }
                else
                {
                    @foreach (var ders in tumDersler)
                    {
                        // Hoca bu dersi veriyor mu?
                        bool dersVeriyorMu = Model.TrainerServices?.Any(x => x.ServiceId == ders.Id) ?? false;

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox"
                                   name="selectedServices"
                                   value="@ders.Id"
                                   @(dersVeriyorMu ? "checked" : "") />
                            <label class="form-check-label">@ders.Name</label>
                        </div>
                    }
                }
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Güncelle</button>
        <a asp-action="Index" class="btn btn-secondary">İptal</a>
    </form>
</div>